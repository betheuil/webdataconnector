<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <form>
      <input id="companyName" type="text" value="Carillion"/>
      <input id="results" type="text" value="100"/>
      <input id="page" type="text" value="1"/>
      <input id="tokenField" type="hidden" value="access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlprS1JOdlhFeWNGQmkxN1QzYlZhX2VtLVJMZyIsImtpZCI6IlprS1JOdlhFeWNGQmkxN1QzYlZhX2VtLVJMZyJ9.eyJpc3MiOiJodHRwczovL2F1dGgucGVyZmVjdGluZm8uY29tIiwiYXVkIjoiaHR0cHM6Ly9hdXRoLnBlcmZlY3RpbmZvLmNvbS9yZXNvdXJjZXMiLCJleHAiOjE1NzAyMDA2MjUsIm5iZiI6MTU3MDE5NzAyNSwiY2xpZW50X2lkIjoiZmUiLCJzY29wZSI6WyJwaUFwaSIsInBpRmVTZXJ2aWNlcyIsInBpUHJvZHVjdHMiXSwic3ViIjoiMjUwOTg1IiwiYXV0aF90aW1lIjoxNTcwMTk3MDI1LCJpZHAiOiJpZHNydiIsInByb2R1Y3QiOlsiRkUiLCJTRUMiXSwiYW1yIjpbInBhc3N3b3JkIl19.qucsLx5KvHSlpRqmxD9neXCN2D-_DzkVx8Rzh2NfCCQK_p5cNJ6jMf6synspczXKlt_yLibsdnkcIrH__KS8_VksPMAmaCipzom6INFi6Syo8327G5FjxXXETY5jFNjpg4DighmkpH6a3EtrVnp_LLiNx9tEKE8MHEkOUF3G2SyfC8j6DJN2tuH2mDBtli7VZQBuFhgKNRixojOsgLMjtv1T-kZhyVBVRLIvf6MlaBqjc27NDd1INh4SGJaRoLmIk3w7R6QcEy19f_M8nwDpCDoAKDdwClyApqGvA6BBjPOOJ4CWVGj782qbiz5Onilqssi5XaHriJJorDeIVdBL9zRD9yksUOR9fqVw6IC5C0S7pEKh2ZwPfXbd98smUaWweBm_EINgYnrbSdsM61CmgR_GodU8HVxViq5bFCQHYfGikgC9QAsjNhbPYfLC-40-u8QBdvAqwthJAfFupip46fz1uqzFC-INz-tvyRwjUOKc3c8Dly05vaPA-N2XltwRIwjBir8cRMeY8JcXh6XkzodyYuRC314GwYon66N6qeXQvktCMMQw9TMJ3dlyK4iaPLimS7puLyDP29YcRAjoInz5tvh-71czVHQDzEzV1MQ0T8EMMUWQUH9pmdhGjdUv5m2GK5VPKDbG9XP-6sHBpnDQdrB9SfLlH4uS1J41-Dk"/>
      <input id="submitButton" type="button" />
    </form>
    <br/>
    <form>
      <input id="companyID" type="text" value="02758652"/>
      <input id="submitButton2" type="button" />
    </form>
  </body>
</html>

<script>
  $('#submitButton').on('click',function(){
    $.ajax({
      url: "https://gateway.perfectinfo.com/sd-api/v1/companies?name=" + $('#companyName').val() + "&pagesize=" + $('#results').val() + "&start=" + $('#page').val() + "",
      // url: "https://gateway.perfectinfo.com/sd-api/v1/companies/02758652",
      type: 'GET',
      contentType: 'application/x-www-form-urlencoded',
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", "Bearer " + $('#tokenField').val());
      },
      success : function(response) {
          console.log(response);
          var parsed_data = JSON.parse(response(0));
          // $('#companyID').val(parsed_data.number);
      },
      error : function(xhr, status, error) {
        var err = xhr.responseText;
        console.log(err);                   
      }
    });
  });
  $('#submitButton2').on('click',function(){
    $.ajax({
      url: "https://gateway.perfectinfo.com/sd-api/v1/companies/" + $('#companyID').val(),
      type: 'GET',
      contentType: 'application/x-www-form-urlencoded',
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", "Bearer " + $('#tokenField').val());
      },
      success : function(response) {
          console.log(response);
      },
      error : function(xhr, status, error) {
        var err = xhr.responseText;
        console.log(err);                   
      }
    });
  });
</script>
