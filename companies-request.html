<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <form>
      <input id="companyName" type="text" value="Carillion"/>
      <input id="results" type="text" value="100"/>
      <input id="page" type="text" value="1"/>
      <input id="tokenField" type="hidden" value="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlprS1JOdlhFeWNGQmkxN1QzYlZhX2VtLVJMZyIsImtpZCI6IlprS1JOdlhFeWNGQmkxN1QzYlZhX2VtLVJMZyJ9.eyJpc3MiOiJodHRwczovL2F1dGgucGVyZmVjdGluZm8uY29tIiwiYXVkIjoiaHR0cHM6Ly9hdXRoLnBlcmZlY3RpbmZvLmNvbS9yZXNvdXJjZXMiLCJleHAiOjE1NzAwMjQ1NjgsIm5iZiI6MTU3MDAyMDk2OCwiY2xpZW50X2lkIjoiZmUiLCJzY29wZSI6WyJwaUFwaSIsInBpRmVTZXJ2aWNlcyIsInBpUHJvZHVjdHMiXSwic3ViIjoiMjUwOTg1IiwiYXV0aF90aW1lIjoxNTcwMDIwOTY4LCJpZHAiOiJpZHNydiIsInByb2R1Y3QiOlsiRkUiLCJTRUMiXSwiYW1yIjpbInBhc3N3b3JkIl19.U3RXjggSDBrRIpUfg6mKqmJN8SfXEtxrpKbh8S0jKZqzT1aneUVnd4zYIvzVEKiLpEUVe1PuF4q1V9Mbi7Xt61G1AdHRx9TCKaYo71QWRwPiuJKlEjWjG4_EjAk44NQZjal_izNItqLtV923poYoQ-bUfRVBnArSwuTWC-IoAL9G7u6vdOVoEAynSl418KSnU9iZTEQXX4MEGnHzdnb_XW5kWlgCJa2cLKra5FKTixhEWnvPxlf2vC7yaLF2RnevSQ9P2fcuPdHv5GmkwFuKhQeUDS706TLuGsDqPnT0yulTWWBWx44lMsHdh62eCjqOcjMOdJ057dOu41lAaWbFb0t90b5yx_c-RFk0Z5X1yXzcafjeP4p8mBYiCW6W-cPQ5YOsv4VGMWVrYhQ2MU7s92_FdgVJ5kQoD7BmrI3GSPnVgF10lGbWks4kt9_HIUuDGhiTV0LrWND3202h_j_uloeXvm4CpoaDK3g1-V-0m0ZSjYlXeIPPP-Nom9GCQVByUqaW0iCQbucEw3gjxvnHB5CB3oMW6aPr2yjSSwBXoXIeonhPD2rpkSJ1peHWbQIucqxvmFjpabb3H6DyTo7J_kwrG-uGUYWpfCbAfVi2ebBlU1ZwsQlEftw6cdW3Pfo6yeY17ZnzbKVuiqLbETCUOr0srNISt1POu904QFg3J2c"/>
      <input id="submitButton" type="button" />
    </form>
    <br/>
    <form>
      <input id="companyID" type="text" value="02758652"/>
      <input id="submitButton2" type="button" />
    </form>
  </body>
</html>

<script>
  $('#submitButton').on('click',function(){
    $.ajax({
      url: "https://gateway.perfectinfo.com/sd-api/v1/companies?name=" + $('#companyName').val() + "&pagesize=" + $('#results').val() + "&start=" + $('#page').val() + "",
      // url: "https://gateway.perfectinfo.com/sd-api/v1/companies/02758652",
      type: 'GET',
      contentType: 'application/x-www-form-urlencoded',
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", "Bearer " + $('#tokenField').val());
      },
      success : function(response) {
          console.log(response);
          var parsed_data = JSON.parse(response);
          $('#companyID').val(parsed_data(0).number);
      },
      error : function(xhr, status, error) {
        var err = xhr.responseText;
        console.log(err);                   
      }
    });
  });
  $('#submitButton2').on('click',function(){
    $.ajax({
      url: "https://gateway.perfectinfo.com/sd-api/v1/companies/" + $('#companyID').val(),
      type: 'GET',
      contentType: 'application/x-www-form-urlencoded',
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", "Bearer " + $('#tokenField').val());
      },
      success : function(response) {
          console.log(response);
      },
      error : function(xhr, status, error) {
        var err = xhr.responseText;
        console.log(err);                   
      }
    });
  });
</script>
